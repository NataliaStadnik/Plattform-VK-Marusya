import{j as s,n as C,e as _,o as N,q as S,r as p,s as j,B as l,A as h,t as g,v as V,w as k,x as w,c as H,R as F,V as y}from"./index-D17CoPWK.js";import{H as f}from"./Heart-6Wmm7wl2.js";import{d as B}from"./deleteFavourite-Cy9kn17O.js";const M=({fill:e})=>s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 4C14.7486 4 17.1749 5.38626 18.6156 7.5H16V9.5H22V3.5H20V5.99936C18.1762 3.57166 15.2724 2 12 2C6.47715 2 2 6.47715 2 12H4C4 7.58172 7.58172 4 12 4ZM20 12C20 16.4183 16.4183 20 12 20C9.25144 20 6.82508 18.6137 5.38443 16.5H8V14.5H2V20.5H4V18.0006C5.82381 20.4283 8.72764 22 12 22C17.5228 22 22 17.5228 22 12H20Z",fill:e})}),R=({id:e,refetch:a,openVideo:c})=>{var x,v;const{showModal:d}=C(),t=_(),i=N(),m=S(),[r,n]=p.useState(i.favorites.includes(e.toString())),o=j({mutationFn:()=>V({id:e}),onSuccess(){g.invalidateQueries({queryKey:["favourites"]}),n(!0)}}),u=j({mutationFn:()=>B(e),onSuccess(){g.invalidateQueries({queryKey:["favourites"]}),n(!1)}}),b=()=>{if(!i.name){d();return}r?u.mutate():o.mutate()};return p.useEffect(()=>{n(i.favorites.includes(e.toString()))},[i.favorites,e]),s.jsxs("div",{className:"button-list",children:[s.jsx(l,{name:"Трейлер",isActive:!0,onClick:c}),t===h.home.path&&s.jsx(l,{name:"О фильме",onClick:()=>m(h.movie.path(e.toString()))}),s.jsxs("div",{className:"button-list",children:[s.jsx(l,{onClick:b,isSVG:r?s.jsx(f,{stroke:"--color-purple-focus",fill:"--color-purple-focus"}):s.jsx(f,{stroke:"--color-white",fill:"--transparent"})}),t===h.home.path&&s.jsx(l,{onClick:()=>a==null?void 0:a(),isSVG:s.jsx(M,{fill:"white"})}),(u.error||o.error)&&s.jsx("div",{className:"error-likes",children:((x=u.error)==null?void 0:x.message)||((v=o.error)==null?void 0:v.message)})]})]})},D=({data:e,refetch:a})=>{const c=_(),[d,t]=p.useState(!1),i=k("backdrop-video",()=>t(!1)),m=()=>{t(!0)},r=()=>{t(!1)};return w(e,{from:{opacity:0},enter:{opacity:1}})(o=>s.jsxs(s.Fragment,{children:[s.jsx(H.section,{className:`dashboard ${c.startsWith("/movie")?"dashboard__movie-page":""}`,style:o,children:s.jsxs("div",{className:"container dashboard__container",children:[s.jsxs("div",{className:"dashboard__left",children:[s.jsxs("div",{className:"elements elements--transp dashboard__elements",children:[s.jsx(F,{tmdbRating:e.tmdbRating,size:"big"}),s.jsx("span",{children:e.releaseYear}),s.jsx("span",{children:e.genres}),s.jsx("span",{children:e.runtime})]}),s.jsx("h2",{className:"title dashboard__title",children:e.title}),s.jsx("p",{className:"dashboard__descr descr",children:e.plot}),s.jsx(R,{id:e.id,refetch:a,openVideo:m})]}),s.jsx("div",{className:"img-wrapper",children:e.posterUrl?s.jsx("img",{className:"dashboard__img",alt:e.title,src:e.posterUrl}):s.jsx("div",{className:"dashboard__img img-not-found",children:s.jsx("span",{children:"Not Found"})})})]})}),d&&s.jsx(y,{ref:i,url:e.trailerUrl,movieTitle:e.title,closeVideo:r})]}))};export{D};
